<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>BabelTrace: TraceExecution/src/ca/uqac/info/trace/execution/Execution.java Source File</title>

<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>


</head>
<body>
<div id="top"><!-- do not remove this div! -->


<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  
  
  <td style="padding-left: 0.5em;">
   <div id="projectname">BabelTrace
   &#160;<span id="projectnumber">20130212</span>
   </div>
   <div id="projectbrief">Automated translation of event traces and temporal properties</div>
  </td>
  
  
  
 </tr>
 </tbody>
</table>
</div>

<!-- Generated by Doxygen 1.7.6.1 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="namespaces.html"><span>Packages</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
    </ul>
  </div>
</div>
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
  initNavTree('Execution_8java.html','');
</script>
<div id="doc-content">
<div class="header">
  <div class="headertitle">
<div class="title">TraceExecution/src/ca/uqac/info/trace/execution/Execution.java</div>  </div>
</div><!--header-->
<div class="contents">
<a href="Execution_8java.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 <span class="comment">/******************************************************************************</span>
<a name="l00002"></a>00002 <span class="comment">  Execution of trace validation tools</span>
<a name="l00003"></a>00003 <span class="comment">  Copyright (C) 2012 Sylvain Halle</span>
<a name="l00004"></a>00004 <span class="comment"></span>
<a name="l00005"></a>00005 <span class="comment">  This program is free software; you can redistribute it and/or modify</span>
<a name="l00006"></a>00006 <span class="comment">  it under the terms of the GNU Lesser General Public License as published by</span>
<a name="l00007"></a>00007 <span class="comment">  the Free Software Foundation; either version 3 of the License, or</span>
<a name="l00008"></a>00008 <span class="comment">  (at your option) any later version.</span>
<a name="l00009"></a>00009 <span class="comment"></span>
<a name="l00010"></a>00010 <span class="comment">  This program is distributed in the hope that it will be useful,</span>
<a name="l00011"></a>00011 <span class="comment">  but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
<a name="l00012"></a>00012 <span class="comment">  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the</span>
<a name="l00013"></a>00013 <span class="comment">  GNU General Public License for more details.</span>
<a name="l00014"></a>00014 <span class="comment"></span>
<a name="l00015"></a>00015 <span class="comment">  You should have received a copy of the GNU Lesser General Public License along</span>
<a name="l00016"></a>00016 <span class="comment">  with this program; if not, write to the Free Software Foundation, Inc.,</span>
<a name="l00017"></a>00017 <span class="comment">  51 Franklin Street, Fifth Floor, Boston, MA 02110-1301 USA.</span>
<a name="l00018"></a>00018 <span class="comment"> ******************************************************************************/</span>
<a name="l00019"></a>00019 <span class="keyword">package </span>ca.uqac.info.trace.execution;
<a name="l00020"></a>00020 
<a name="l00021"></a>00021 <span class="keyword">import</span> java.io.*;
<a name="l00022"></a>00022 
<a name="l00040"></a><a class="code" href="classca_1_1uqac_1_1info_1_1trace_1_1execution_1_1Execution.html">00040</a> <span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">class </span><a class="code" href="classca_1_1uqac_1_1info_1_1trace_1_1execution_1_1Execution.html">Execution</a>
<a name="l00041"></a>00041 {
<a name="l00045"></a><a class="code" href="classca_1_1uqac_1_1info_1_1trace_1_1execution_1_1Execution.html#ab394941fb4ccda24f1490b39d92f99a5">00045</a>   <span class="keyword">protected</span> <span class="keyword">static</span> <span class="keyword">final</span> String <a class="code" href="classca_1_1uqac_1_1info_1_1trace_1_1execution_1_1Execution.html#ab394941fb4ccda24f1490b39d92f99a5">CRLF</a> = System.getProperty(<span class="stringliteral">&quot;line.separator&quot;</span>);
<a name="l00046"></a>00046   
<a name="l00050"></a>00050   <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">enum</span> ReturnVerdict {TRUE, FALSE, INCONCLUSIVE, ERROR};
<a name="l00051"></a>00051 
<a name="l00055"></a>00055   <span class="keyword">private</span> <span class="keywordtype">long</span> m_time = 0;
<a name="l00056"></a>00056 
<a name="l00060"></a>00060   <span class="keyword">private</span> <span class="keywordtype">long</span> m_memory = 0;
<a name="l00061"></a>00061 
<a name="l00065"></a>00065   <span class="keyword">private</span> ReturnVerdict m_returnValue = ReturnVerdict.ERROR;
<a name="l00066"></a>00066   
<a name="l00070"></a>00070   <span class="keyword">private</span> <span class="keywordtype">int</span> m_returnCode = 0;
<a name="l00071"></a>00071   
<a name="l00075"></a>00075   <span class="keyword">private</span> String m_returnString = <span class="stringliteral">&quot;&quot;</span>;
<a name="l00076"></a>00076   
<a name="l00080"></a>00080   <span class="keyword">private</span> String m_errorString = <span class="stringliteral">&quot;&quot;</span>;
<a name="l00081"></a>00081 
<a name="l00085"></a><a class="code" href="classca_1_1uqac_1_1info_1_1trace_1_1execution_1_1Execution.html#a3278acd1a77899ea489fabdf7bc9b3d2">00085</a>   <span class="keyword">protected</span> String <a class="code" href="classca_1_1uqac_1_1info_1_1trace_1_1execution_1_1Execution.html#a3278acd1a77899ea489fabdf7bc9b3d2">m_property</a> = <span class="stringliteral">&quot;&quot;</span>;
<a name="l00086"></a>00086 
<a name="l00090"></a><a class="code" href="classca_1_1uqac_1_1info_1_1trace_1_1execution_1_1Execution.html#a142ab52d20d196b3347dc94395b53804">00090</a>   <span class="keyword">protected</span> String <a class="code" href="classca_1_1uqac_1_1info_1_1trace_1_1execution_1_1Execution.html#a142ab52d20d196b3347dc94395b53804">m_signature</a> = <span class="stringliteral">&quot;&quot;</span>;
<a name="l00091"></a>00091 
<a name="l00095"></a><a class="code" href="classca_1_1uqac_1_1info_1_1trace_1_1execution_1_1Execution.html#a82d3056ab9388545365f2fdbaf2aa9da">00095</a>   <span class="keyword">protected</span> String <a class="code" href="classca_1_1uqac_1_1info_1_1trace_1_1execution_1_1Execution.html#a82d3056ab9388545365f2fdbaf2aa9da">m_trace</a> = <span class="stringliteral">&quot;&quot;</span>;
<a name="l00096"></a>00096   
<a name="l00102"></a><a class="code" href="classca_1_1uqac_1_1info_1_1trace_1_1execution_1_1Execution.html#a2c0378dbff86aa49e6895ca24bff3159">00102</a>   <span class="keyword">protected</span> <span class="keywordtype">boolean</span> <a class="code" href="classca_1_1uqac_1_1info_1_1trace_1_1execution_1_1Execution.html#a2c0378dbff86aa49e6895ca24bff3159">m_timeOnlyLastCommand</a> = <span class="keyword">false</span>;
<a name="l00103"></a>00103 
<a name="l00110"></a><a class="code" href="classca_1_1uqac_1_1info_1_1trace_1_1execution_1_1Execution.html#ae61ccf6cf0febd6e2f4a601a43d6a79f">00110</a>   <span class="keyword">public</span> <span class="keyword">final</span> <span class="keywordtype">void</span> <a class="code" href="classca_1_1uqac_1_1info_1_1trace_1_1execution_1_1Execution.html#ae61ccf6cf0febd6e2f4a601a43d6a79f">setSignature</a>(String s)
<a name="l00111"></a>00111   {
<a name="l00112"></a>00112     <a class="code" href="classca_1_1uqac_1_1info_1_1trace_1_1execution_1_1Execution.html#a142ab52d20d196b3347dc94395b53804">m_signature</a> = s;
<a name="l00113"></a>00113   }
<a name="l00114"></a>00114 
<a name="l00121"></a><a class="code" href="classca_1_1uqac_1_1info_1_1trace_1_1execution_1_1Execution.html#a6d894b41991bbd181aa90e76df90ea08">00121</a>   <span class="keyword">public</span> <span class="keyword">final</span> <span class="keywordtype">void</span> <a class="code" href="classca_1_1uqac_1_1info_1_1trace_1_1execution_1_1Execution.html#a6d894b41991bbd181aa90e76df90ea08">setTrace</a>(String s)
<a name="l00122"></a>00122   {
<a name="l00123"></a>00123     <a class="code" href="classca_1_1uqac_1_1info_1_1trace_1_1execution_1_1Execution.html#a82d3056ab9388545365f2fdbaf2aa9da">m_trace</a> = s;
<a name="l00124"></a>00124   }
<a name="l00125"></a>00125 
<a name="l00132"></a><a class="code" href="classca_1_1uqac_1_1info_1_1trace_1_1execution_1_1Execution.html#a4dd526f5dc859c6fe5e2f5501c924f86">00132</a>   <span class="keyword">public</span> <span class="keyword">final</span> <span class="keywordtype">void</span> <a class="code" href="classca_1_1uqac_1_1info_1_1trace_1_1execution_1_1Execution.html#a4dd526f5dc859c6fe5e2f5501c924f86">setProperty</a>(String s)
<a name="l00133"></a>00133   {
<a name="l00134"></a>00134     <a class="code" href="classca_1_1uqac_1_1info_1_1trace_1_1execution_1_1Execution.html#a3278acd1a77899ea489fabdf7bc9b3d2">m_property</a> = s;
<a name="l00135"></a>00135   }
<a name="l00136"></a>00136 
<a name="l00143"></a>00143   <span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keywordtype">boolean</span> <a class="code" href="classca_1_1uqac_1_1info_1_1trace_1_1execution_1_1Execution.html#acb815d8d5716fb0f4c19d57e3c3c1555">isReady</a>();
<a name="l00144"></a>00144 
<a name="l00149"></a><a class="code" href="classca_1_1uqac_1_1info_1_1trace_1_1execution_1_1Execution.html#ae04499038e3c7b9b8b1329b912e11c10">00149</a>   <span class="keyword">public</span> <span class="keyword">final</span> <span class="keywordtype">long</span> <a class="code" href="classca_1_1uqac_1_1info_1_1trace_1_1execution_1_1Execution.html#ae04499038e3c7b9b8b1329b912e11c10">getTime</a>()
<a name="l00150"></a>00150   {
<a name="l00151"></a>00151     <span class="keywordflow">return</span> m_time;
<a name="l00152"></a>00152   }
<a name="l00153"></a>00153 
<a name="l00158"></a><a class="code" href="classca_1_1uqac_1_1info_1_1trace_1_1execution_1_1Execution.html#ac6a23e81d7789b00acd6393e4c01d856">00158</a>   <span class="keyword">public</span> <span class="keyword">final</span> <span class="keywordtype">long</span> <a class="code" href="classca_1_1uqac_1_1info_1_1trace_1_1execution_1_1Execution.html#ac6a23e81d7789b00acd6393e4c01d856">getMemory</a>()
<a name="l00159"></a>00159   {
<a name="l00160"></a>00160     <span class="keywordflow">return</span> m_memory;
<a name="l00161"></a>00161   }
<a name="l00162"></a>00162 
<a name="l00168"></a><a class="code" href="classca_1_1uqac_1_1info_1_1trace_1_1execution_1_1Execution.html#afd8aac379dc3f6a6a7ddf8255f47ab3e">00168</a>   <span class="keyword">public</span> <span class="keyword">final</span> ReturnVerdict <a class="code" href="classca_1_1uqac_1_1info_1_1trace_1_1execution_1_1Execution.html#afd8aac379dc3f6a6a7ddf8255f47ab3e">getReturnVerdict</a>()
<a name="l00169"></a>00169   {
<a name="l00170"></a>00170     <span class="keywordflow">return</span> m_returnValue;
<a name="l00171"></a>00171   }
<a name="l00172"></a>00172   
<a name="l00177"></a><a class="code" href="classca_1_1uqac_1_1info_1_1trace_1_1execution_1_1Execution.html#af8d9e245616f74b1ac7080607a10faac">00177</a>   <span class="keyword">public</span> <span class="keyword">final</span> <span class="keywordtype">int</span> <a class="code" href="classca_1_1uqac_1_1info_1_1trace_1_1execution_1_1Execution.html#af8d9e245616f74b1ac7080607a10faac">getReturnCode</a>()
<a name="l00178"></a>00178   {
<a name="l00179"></a>00179     <span class="keywordflow">return</span> m_returnCode;
<a name="l00180"></a>00180   }
<a name="l00181"></a>00181   
<a name="l00186"></a><a class="code" href="classca_1_1uqac_1_1info_1_1trace_1_1execution_1_1Execution.html#a777bbfd7477b3b58f2e36042cad0081a">00186</a>   <span class="keyword">public</span> <span class="keyword">final</span> String <a class="code" href="classca_1_1uqac_1_1info_1_1trace_1_1execution_1_1Execution.html#a777bbfd7477b3b58f2e36042cad0081a">getReturnString</a>()
<a name="l00187"></a>00187   {
<a name="l00188"></a>00188     <span class="keywordflow">return</span> m_returnString;
<a name="l00189"></a>00189   }
<a name="l00190"></a>00190   
<a name="l00195"></a><a class="code" href="classca_1_1uqac_1_1info_1_1trace_1_1execution_1_1Execution.html#afae803106790a0788ed481bfb25a7365">00195</a>   <span class="keyword">public</span> String <a class="code" href="classca_1_1uqac_1_1info_1_1trace_1_1execution_1_1Execution.html#afae803106790a0788ed481bfb25a7365">getTraceExtension</a>()
<a name="l00196"></a>00196   {
<a name="l00197"></a>00197     <span class="keywordflow">return</span> <span class="stringliteral">&quot;&quot;</span>;
<a name="l00198"></a>00198   }
<a name="l00199"></a>00199   
<a name="l00204"></a><a class="code" href="classca_1_1uqac_1_1info_1_1trace_1_1execution_1_1Execution.html#a608cc74b70e0b46c2ae1597940fbb8ae">00204</a>   <span class="keyword">public</span> String <a class="code" href="classca_1_1uqac_1_1info_1_1trace_1_1execution_1_1Execution.html#a608cc74b70e0b46c2ae1597940fbb8ae">getSignatureExtension</a>()
<a name="l00205"></a>00205   {
<a name="l00206"></a>00206     <span class="keywordflow">return</span> <span class="stringliteral">&quot;&quot;</span>;
<a name="l00207"></a>00207   }
<a name="l00208"></a>00208   
<a name="l00213"></a><a class="code" href="classca_1_1uqac_1_1info_1_1trace_1_1execution_1_1Execution.html#a07513c385c6321c29f0392c93e69e761">00213</a>   <span class="keyword">public</span> String <a class="code" href="classca_1_1uqac_1_1info_1_1trace_1_1execution_1_1Execution.html#a07513c385c6321c29f0392c93e69e761">getFormulaExtension</a>()
<a name="l00214"></a>00214   {
<a name="l00215"></a>00215     <span class="keywordflow">return</span> <span class="stringliteral">&quot;&quot;</span>;
<a name="l00216"></a>00216   }
<a name="l00217"></a>00217   
<a name="l00218"></a><a class="code" href="classca_1_1uqac_1_1info_1_1trace_1_1execution_1_1Execution.html#acb08f2d53684d23d82e00b986ae07bec">00218</a>   <span class="keyword">protected</span> String <a class="code" href="classca_1_1uqac_1_1info_1_1trace_1_1execution_1_1Execution.html#acb08f2d53684d23d82e00b986ae07bec">getWorkingDirectory</a>()
<a name="l00219"></a>00219   {
<a name="l00220"></a>00220     <span class="keywordflow">return</span> <span class="stringliteral">&quot;&quot;</span>;
<a name="l00221"></a>00221   }
<a name="l00222"></a>00222 
<a name="l00227"></a><a class="code" href="classca_1_1uqac_1_1info_1_1trace_1_1execution_1_1Execution.html#a82a02a39e3cf5a1dff7e4645b9a49cde">00227</a>   <span class="keyword">public</span> <span class="keyword">final</span> <span class="keywordtype">void</span> <a class="code" href="classca_1_1uqac_1_1info_1_1trace_1_1execution_1_1Execution.html#a82a02a39e3cf5a1dff7e4645b9a49cde">run</a>() throws <a class="code" href="classca_1_1uqac_1_1info_1_1trace_1_1execution_1_1Execution_1_1CommandLineException.html">CommandLineException</a>
<a name="l00228"></a>00228   {
<a name="l00229"></a>00229     <span class="keywordtype">long</span> start_time = 0, end_time = 0;
<a name="l00230"></a>00230     String[] command_list = <a class="code" href="classca_1_1uqac_1_1info_1_1trace_1_1execution_1_1Execution.html#a8310fa05e5aaa471ab49972f200e3f98">getCommandLines</a>();
<a name="l00231"></a>00231     String s_cwd = <a class="code" href="classca_1_1uqac_1_1info_1_1trace_1_1execution_1_1Execution.html#acb08f2d53684d23d82e00b986ae07bec">getWorkingDirectory</a>();
<a name="l00232"></a>00232     File cwd = null;
<a name="l00233"></a>00233     <span class="keywordflow">if</span> (!s_cwd.isEmpty())
<a name="l00234"></a>00234     {
<a name="l00235"></a>00235       cwd = <span class="keyword">new</span> File(s_cwd);
<a name="l00236"></a>00236     }
<a name="l00237"></a>00237     <span class="keywordflow">if</span> (!<a class="code" href="classca_1_1uqac_1_1info_1_1trace_1_1execution_1_1Execution.html#a2c0378dbff86aa49e6895ca24bff3159">m_timeOnlyLastCommand</a>)
<a name="l00238"></a>00238     {
<a name="l00239"></a>00239         <span class="comment">// Start stopwatch here if we count running time for all commands</span>
<a name="l00240"></a>00240         start_time = System.nanoTime();
<a name="l00241"></a>00241     }
<a name="l00242"></a>00242     <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; command_list.length; i++)
<a name="l00243"></a>00243     {
<a name="l00244"></a>00244       String[] command_to_run = {<span class="stringliteral">&quot;bash&quot;</span>, <span class="stringliteral">&quot;-c&quot;</span>, command_list[i]};
<a name="l00245"></a>00245       Runtime rt = Runtime.getRuntime();
<a name="l00246"></a>00246       <span class="keywordflow">try</span>
<a name="l00247"></a>00247       {
<a name="l00248"></a>00248         <span class="keywordflow">if</span> (i != command_list.length - 1) <span class="comment">// Not the last command to run</span>
<a name="l00249"></a>00249         {
<a name="l00250"></a>00250           <span class="comment">// Just run it and move on to the next</span>
<a name="l00251"></a>00251           Process p = rt.exec(command_to_run, null, cwd);
<a name="l00252"></a>00252           m_returnCode = p.waitFor(); <span class="comment">// Must wait till command is finished</span>
<a name="l00253"></a>00253           <span class="keywordflow">if</span> (m_returnCode != 0)
<a name="l00254"></a>00254           {
<a name="l00255"></a>00255             <span class="comment">// Throw an exception in case the command does not</span>
<a name="l00256"></a>00256             <span class="comment">// exit with return code 0 (indicating an error)</span>
<a name="l00257"></a>00257                 System.err.println(m_returnCode + command_list[i]);
<a name="l00258"></a>00258                 <span class="keywordflow">throw</span> <span class="keyword">new</span> CommandLineException(m_returnCode, command_list[i]);
<a name="l00259"></a>00259           }
<a name="l00260"></a>00260           <span class="keywordflow">continue</span>;
<a name="l00261"></a>00261         }
<a name="l00262"></a>00262         <span class="comment">// Last command</span>
<a name="l00263"></a>00263         <span class="keywordflow">if</span> (<a class="code" href="classca_1_1uqac_1_1info_1_1trace_1_1execution_1_1Execution.html#a2c0378dbff86aa49e6895ca24bff3159">m_timeOnlyLastCommand</a>)
<a name="l00264"></a>00264         {
<a name="l00265"></a>00265                 <span class="comment">// Start stopwatch here if we count running time for last command only</span>
<a name="l00266"></a>00266                 start_time = System.nanoTime();
<a name="l00267"></a>00267         }
<a name="l00268"></a>00268         Process p = rt.exec(command_to_run, null, cwd);
<a name="l00269"></a>00269         <a class="code" href="classca_1_1uqac_1_1info_1_1trace_1_1execution_1_1Execution_1_1StreamGobbler.html">StreamGobbler</a> errorGobbler = <span class="keyword">new</span> 
<a name="l00270"></a>00270             <a class="code" href="classca_1_1uqac_1_1info_1_1trace_1_1execution_1_1Execution_1_1StreamGobbler.html">StreamGobbler</a>(p.getErrorStream());            
<a name="l00271"></a>00271         <span class="comment">// any output?</span>
<a name="l00272"></a>00272         <a class="code" href="classca_1_1uqac_1_1info_1_1trace_1_1execution_1_1Execution_1_1StreamGobbler.html">StreamGobbler</a> outputGobbler = <span class="keyword">new</span> 
<a name="l00273"></a>00273             <a class="code" href="classca_1_1uqac_1_1info_1_1trace_1_1execution_1_1Execution_1_1StreamGobbler.html">StreamGobbler</a>(p.getInputStream());
<a name="l00274"></a>00274         <span class="comment">// kick them off</span>
<a name="l00275"></a>00275         errorGobbler.start();
<a name="l00276"></a>00276         outputGobbler.start();
<a name="l00277"></a>00277         <span class="comment">// any error???</span>
<a name="l00278"></a>00278         m_returnCode = p.waitFor();
<a name="l00279"></a>00279         <span class="comment">// Stop gobblers</span>
<a name="l00280"></a>00280         <span class="comment">//errorGobbler.</span>
<a name="l00281"></a>00281         end_time = System.nanoTime();
<a name="l00282"></a>00282 
<a name="l00283"></a>00283         <span class="comment">//Execution time</span>
<a name="l00284"></a>00284         m_time = end_time - start_time;
<a name="l00285"></a>00285 
<a name="l00286"></a>00286         <span class="comment">// Get the memory consumption</span>
<a name="l00287"></a>00287         rt.gc();
<a name="l00288"></a>00288         m_memory = rt.totalMemory() - rt.freeMemory();
<a name="l00289"></a>00289 
<a name="l00290"></a>00290         <span class="comment">// Return value</span>
<a name="l00291"></a>00291         m_returnString = outputGobbler.getString();
<a name="l00292"></a>00292         m_errorString = errorGobbler.<a class="code" href="classca_1_1uqac_1_1info_1_1trace_1_1execution_1_1Execution_1_1StreamGobbler.html#ac54f236c3ea9734eb588cbb52ecabd98">getString</a>();
<a name="l00293"></a>00293         <span class="keywordflow">if</span> (!m_returnString.isEmpty())
<a name="l00294"></a>00294           m_returnValue = <a class="code" href="classca_1_1uqac_1_1info_1_1trace_1_1execution_1_1Execution.html#a41ba2368e7c362fb471424dcbc96b662">parseReturnString</a>(m_returnString);
<a name="l00295"></a>00295         <span class="keywordflow">else</span>
<a name="l00296"></a>00296           m_returnValue = <a class="code" href="classca_1_1uqac_1_1info_1_1trace_1_1execution_1_1Execution.html#a41ba2368e7c362fb471424dcbc96b662">parseReturnString</a>(m_errorString);
<a name="l00297"></a>00297         <span class="comment">// For debugging: System.err.println(&quot;Response:\n&quot; + strReponse);</span>
<a name="l00298"></a>00298 
<a name="l00299"></a>00299         <span class="comment">// close</span>
<a name="l00300"></a>00300         p.destroy();
<a name="l00301"></a>00301       }
<a name="l00302"></a>00302       <span class="keywordflow">catch</span> (Exception e)
<a name="l00303"></a>00303       {
<a name="l00304"></a>00304         e.printStackTrace();
<a name="l00305"></a>00305       }
<a name="l00306"></a>00306     }
<a name="l00307"></a>00307   }
<a name="l00308"></a>00308 
<a name="l00316"></a>00316   <span class="keyword">protected</span> <span class="keyword">abstract</span> String[] <a class="code" href="classca_1_1uqac_1_1info_1_1trace_1_1execution_1_1Execution.html#a8310fa05e5aaa471ab49972f200e3f98">getCommandLines</a>();
<a name="l00317"></a>00317 
<a name="l00323"></a>00323   <span class="keyword">protected</span> <span class="keyword">abstract</span> String <a class="code" href="classca_1_1uqac_1_1info_1_1trace_1_1execution_1_1Execution.html#a38d42f68b5ada3ace02e66f39da36a68">getStdin</a>();
<a name="l00324"></a>00324 
<a name="l00332"></a>00332   <span class="comment">/* package */</span> <span class="keyword">abstract</span> ReturnVerdict <a class="code" href="classca_1_1uqac_1_1info_1_1trace_1_1execution_1_1Execution.html#a41ba2368e7c362fb471424dcbc96b662">parseReturnString</a>(String strValue) ;
<a name="l00333"></a>00333 
<a name="l00340"></a><a class="code" href="classca_1_1uqac_1_1info_1_1trace_1_1execution_1_1Execution.html#aa74e1fd0498cfd969aae66e224b74a7f">00340</a>   <span class="keyword">protected</span> <span class="keyword">static</span> String <a class="code" href="classca_1_1uqac_1_1info_1_1trace_1_1execution_1_1Execution.html#aa74e1fd0498cfd969aae66e224b74a7f">conditionalQuote</a>(String s)
<a name="l00341"></a>00341   {
<a name="l00342"></a>00342     <span class="keywordflow">if</span> (s.contains(<span class="stringliteral">&quot; &quot;</span>))
<a name="l00343"></a>00343       <span class="keywordflow">return</span> <span class="stringliteral">&quot;\&quot;&quot;</span> + s + <span class="stringliteral">&quot;\&quot;&quot;</span>;
<a name="l00344"></a>00344     <span class="keywordflow">return</span> s;
<a name="l00345"></a>00345   }
<a name="l00346"></a>00346   
<a name="l00347"></a><a class="code" href="classca_1_1uqac_1_1info_1_1trace_1_1execution_1_1Execution.html#a5c068c1b3b91f28dfb74b0bdd9f9f847">00347</a>   <span class="keyword">public</span> String <a class="code" href="classca_1_1uqac_1_1info_1_1trace_1_1execution_1_1Execution.html#a5c068c1b3b91f28dfb74b0bdd9f9f847">getErrorString</a>()
<a name="l00348"></a>00348   {
<a name="l00349"></a>00349     <span class="keywordflow">return</span> m_errorString;
<a name="l00350"></a>00350   }
<a name="l00351"></a>00351   
<a name="l00352"></a>00352   <span class="comment">/*</span>
<a name="l00353"></a>00353 <span class="comment">   * Taken (and adapted) from:</span>
<a name="l00354"></a>00354 <span class="comment">   * http://www.javaworld.com/javaworld/jw-12-2000/jw-1229-traps.html?page=4</span>
<a name="l00355"></a>00355 <span class="comment">   */</span>
<a name="l00356"></a><a class="code" href="classca_1_1uqac_1_1info_1_1trace_1_1execution_1_1Execution_1_1StreamGobbler.html">00356</a>   <span class="keyword">protected</span> <span class="keyword">class </span><a class="code" href="classca_1_1uqac_1_1info_1_1trace_1_1execution_1_1Execution_1_1StreamGobbler.html">StreamGobbler</a> <span class="keyword">extends</span> Thread
<a name="l00357"></a>00357   {
<a name="l00358"></a><a class="code" href="classca_1_1uqac_1_1info_1_1trace_1_1execution_1_1Execution_1_1StreamGobbler.html#afa21139977fd8d9061e0287dc11fbba5">00358</a>       InputStream <a class="code" href="classca_1_1uqac_1_1info_1_1trace_1_1execution_1_1Execution_1_1StreamGobbler.html#afa21139977fd8d9061e0287dc11fbba5">is</a>;
<a name="l00359"></a><a class="code" href="classca_1_1uqac_1_1info_1_1trace_1_1execution_1_1Execution_1_1StreamGobbler.html#aa602a85266da83c6398f6630abb88679">00359</a>       StringBuilder <a class="code" href="classca_1_1uqac_1_1info_1_1trace_1_1execution_1_1Execution_1_1StreamGobbler.html#aa602a85266da83c6398f6630abb88679">m_contents</a> = <span class="keyword">new</span> StringBuilder();
<a name="l00360"></a>00360       
<a name="l00361"></a><a class="code" href="classca_1_1uqac_1_1info_1_1trace_1_1execution_1_1Execution_1_1StreamGobbler.html#afe546499ccd83cee6ef89def8aa35cd6">00361</a>       <a class="code" href="classca_1_1uqac_1_1info_1_1trace_1_1execution_1_1Execution_1_1StreamGobbler.html#afe546499ccd83cee6ef89def8aa35cd6">StreamGobbler</a>(InputStream <a class="code" href="classca_1_1uqac_1_1info_1_1trace_1_1execution_1_1Execution_1_1StreamGobbler.html#afa21139977fd8d9061e0287dc11fbba5">is</a>)
<a name="l00362"></a>00362       {
<a name="l00363"></a>00363           this.is = <a class="code" href="classca_1_1uqac_1_1info_1_1trace_1_1execution_1_1Execution_1_1StreamGobbler.html#afa21139977fd8d9061e0287dc11fbba5">is</a>;
<a name="l00364"></a>00364       }
<a name="l00365"></a>00365       
<a name="l00366"></a><a class="code" href="classca_1_1uqac_1_1info_1_1trace_1_1execution_1_1Execution_1_1StreamGobbler.html#a45687df4035996b26a97b9c21e21a8a8">00366</a>       <span class="keyword">public</span> <span class="keywordtype">void</span> <a class="code" href="classca_1_1uqac_1_1info_1_1trace_1_1execution_1_1Execution_1_1StreamGobbler.html#a45687df4035996b26a97b9c21e21a8a8">run</a>()
<a name="l00367"></a>00367       {
<a name="l00368"></a>00368         <span class="keywordflow">try</span>
<a name="l00369"></a>00369         {
<a name="l00370"></a>00370           InputStreamReader isr = <span class="keyword">new</span> InputStreamReader(<a class="code" href="classca_1_1uqac_1_1info_1_1trace_1_1execution_1_1Execution_1_1StreamGobbler.html#afa21139977fd8d9061e0287dc11fbba5">is</a>);
<a name="l00371"></a>00371           BufferedReader br = <span class="keyword">new</span> BufferedReader(isr);
<a name="l00372"></a>00372           String line=null;
<a name="l00373"></a>00373           <span class="keywordflow">while</span> ( (line = br.readLine()) != null)
<a name="l00374"></a>00374           {
<a name="l00375"></a>00375             <a class="code" href="classca_1_1uqac_1_1info_1_1trace_1_1execution_1_1Execution_1_1StreamGobbler.html#aa602a85266da83c6398f6630abb88679">m_contents</a>.append(line).append(<span class="stringliteral">&quot;\n&quot;</span>);
<a name="l00376"></a>00376           }
<a name="l00377"></a>00377         }
<a name="l00378"></a>00378         <span class="keywordflow">catch</span> (IOException ioe)
<a name="l00379"></a>00379         {
<a name="l00380"></a>00380           ioe.printStackTrace();  
<a name="l00381"></a>00381         }
<a name="l00382"></a>00382       }
<a name="l00383"></a>00383       
<a name="l00384"></a><a class="code" href="classca_1_1uqac_1_1info_1_1trace_1_1execution_1_1Execution_1_1StreamGobbler.html#ac54f236c3ea9734eb588cbb52ecabd98">00384</a>       <span class="keyword">public</span> String <a class="code" href="classca_1_1uqac_1_1info_1_1trace_1_1execution_1_1Execution_1_1StreamGobbler.html#ac54f236c3ea9734eb588cbb52ecabd98">getString</a>()
<a name="l00385"></a>00385       {
<a name="l00386"></a>00386         <span class="keywordflow">return</span> <a class="code" href="classca_1_1uqac_1_1info_1_1trace_1_1execution_1_1Execution_1_1StreamGobbler.html#aa602a85266da83c6398f6630abb88679">m_contents</a>.toString();
<a name="l00387"></a>00387       }
<a name="l00388"></a>00388   }
<a name="l00389"></a>00389   
<a name="l00390"></a><a class="code" href="classca_1_1uqac_1_1info_1_1trace_1_1execution_1_1Execution_1_1CommandLineException.html">00390</a>   <span class="keyword">public</span> <span class="keyword">class </span><a class="code" href="classca_1_1uqac_1_1info_1_1trace_1_1execution_1_1Execution_1_1CommandLineException.html">CommandLineException</a> <span class="keyword">extends</span> Exception
<a name="l00391"></a>00391   {
<a name="l00392"></a>00392     <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keywordtype">long</span> serialVersionUID = 1L;
<a name="l00393"></a><a class="code" href="classca_1_1uqac_1_1info_1_1trace_1_1execution_1_1Execution_1_1CommandLineException.html#a01456c1c32caf33a9330b2655432bbee">00393</a>                 <span class="keyword">protected</span> <span class="keywordtype">int</span> <a class="code" href="classca_1_1uqac_1_1info_1_1trace_1_1execution_1_1Execution_1_1CommandLineException.html#a01456c1c32caf33a9330b2655432bbee">m_returnCode</a> = 0;
<a name="l00394"></a><a class="code" href="classca_1_1uqac_1_1info_1_1trace_1_1execution_1_1Execution_1_1CommandLineException.html#a679f42911dd27d82cc0b8e18072f089f">00394</a>         <span class="keyword">protected</span> String <a class="code" href="classca_1_1uqac_1_1info_1_1trace_1_1execution_1_1Execution_1_1CommandLineException.html#a679f42911dd27d82cc0b8e18072f089f">m_commandLine</a> = <span class="stringliteral">&quot;&quot;</span>;
<a name="l00395"></a>00395         
<a name="l00396"></a><a class="code" href="classca_1_1uqac_1_1info_1_1trace_1_1execution_1_1Execution_1_1CommandLineException.html#a71ed259b563014ee1a5051e5479d220c">00396</a>         <span class="keyword">public</span> <a class="code" href="classca_1_1uqac_1_1info_1_1trace_1_1execution_1_1Execution_1_1CommandLineException.html#a71ed259b563014ee1a5051e5479d220c">CommandLineException</a>(<span class="keywordtype">int</span> returnCode, String commandLine)
<a name="l00397"></a>00397         {
<a name="l00398"></a>00398                 <a class="code" href="classca_1_1uqac_1_1info_1_1trace_1_1execution_1_1Execution_1_1CommandLineException.html#a01456c1c32caf33a9330b2655432bbee">m_returnCode</a> = returnCode;
<a name="l00399"></a>00399                 <a class="code" href="classca_1_1uqac_1_1info_1_1trace_1_1execution_1_1Execution_1_1CommandLineException.html#a679f42911dd27d82cc0b8e18072f089f">m_commandLine</a> = commandLine;
<a name="l00400"></a>00400         }
<a name="l00401"></a>00401   }
<a name="l00402"></a>00402 }
</pre></div></div><!-- contents -->
</div>
  <div id="nav-path" class="navpath">
    <ul>
      <li class="navelem"><a class="el" href="Execution_8java.html">Execution.java</a>      </li>

    <li class="footer">Generated on Wed Feb 13 2013 14:31:34 for BabelTrace by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.6.1 </li>
   </ul>
 </div>


</body>
</html>
